<!DOCTYPE html>
<html>
<head>
    <title>Razorpay Test</title>
</head>
<body>

<h2>Razorpay Payment Test</h2>

Amount: <input type="number" id="amount" value="500">
<button onclick="payNow()">Pay Now</button>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>

function payNow() {

    let amount = document.getElementById("amount").value;

    fetch('/razorpay/create', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            amount: amount,
            orderId: "TEST_ORDER_123"
        })
    })
    .then(res => res.json())
    .then(data => {

        var options = {
            "key": "rzp_test_thbnstH0Bq80hy",
            "amount": data.amount,
            "currency": "INR",
            "order_id": data.id,
            "name": "Ecommerce Test",
            "description": "Test Payment",
            "handler": function (response){
                alert("Payment Successful: " + response.razorpay_payment_id);
            }
        };

        var rzp1 = new Razorpay(options);
        rzp1.open();
    });
}

</script>

</body>
</html>
